<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width"/>
  <meta charset="UTF-8">
  <title>Treeview demo</title>
  <style>
tree-view::part(tree){
  padding: 10px;
  border: 1px solid;
  font-family: monospace;
  font-size: 1.15em;
}
tree-view{
  --tree-row-padding: 4px;
  --tree-row-indent: 1em;
  --tree-hover-background: #579;
  --tree-connector-position: 13px;
}
</style>
<script src="../tree-view/tree-view.js"></script>
</head>
<body>
<template id="tree-template">
<link as="style" type="text/css" rel="preload prefetch stylesheet" href="../tree-view/tree-view.css">
</template>
<div>
<h2>Treeview demo</h2>
<tree-view class="showInfo" open data-drop></tree-view>
</div>
<footer>
<p>Hint: try to drag and drop .json files to the view</p>
</footer> 
<script>
function getAttrs(e){
  let s = [e.localName];
  if(e.id){
    s[0] += `#${e.id}`;
  }
  if(e.classList.length){
    e.classList.forEach(cls => {s[0] += `.${cls}`});
  }
  for(let i = 0; i<e.attributes.length; i++){
    let a = e.attributes[i];
    if(a.name === "id" || a.name === "class"){
      continue
    }
    s.push(`${a.name}="${a.value}"`)
  }
  return s
}
function encodeElem(e){
  let o = e.children.length ? { } : e.textContent;
  for(let i of e.children){
    o[getAttrs(i).join(" ")] = encodeElem(i);
  }
  return o
}
let view = document.getElementsByTagName("tree-view")[0];
view.src = {"html":encodeElem(document.documentElement)}
</script>
</body>
</html>